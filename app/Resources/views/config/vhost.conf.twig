<VirtualHost *:80>
    ServerName {% if vHost.prefix|length > 0 %}{{ vHost.prefix }}.{% endif %}{{ vHost.project }}
    ServerAlias {% if vHost.prefix|length > 0 %}{{ vHost.prefix }}.{% endif %}{{ vHost.project }}{% if vHost.domain|length > 0 %}.{{ vHost.domain }}{% endif %}

    DocumentRoot {{ apache_document_root }}/{{ vHost.project }}/web

    <Directory {{ apache_document_root }}/{{ vHost.project }}/web>
        AllowOverride None
        Order Allow,Deny
        Allow from All

        <IfModule mod_rewrite.c>
            Options -MultiViews
            RewriteEngine On
            RewriteCond %{REQUEST_FILENAME} !-f
            {% if vHost.development %}

            RewriteRule ^(.*)$ app_dev.php [QSA,L]
            {% else %}

            RewriteRule ^(.*)$ app.php [QSA,L]
            {% endif %}

        </IfModule>
    </Directory>

    {% if vHost.symlinks %}

    <Directory {{ apache_document_root }}/{{ vHost.project }}>
        Options FollowSymlinks
    </Directory>
    {% endif %}

    ErrorLog {{ apache_log_dir }}/{% if vHost.prefix|length > 0 %}{{ vHost.prefix }}_{% endif %}{{ vHost.project }}{% if vHost.domain|length > 0 %}_{{ vHost.domain }}{% endif %}_error.log
    CustomLog {{ apache_log_dir }}/{% if vHost.prefix|length > 0 %}{{ vHost.prefix }}_{% endif %}{{ vHost.project }}{% if vHost.domain|length > 0 %}_{{ vHost.domain }}{% endif %}_access.log combined
</VirtualHost>